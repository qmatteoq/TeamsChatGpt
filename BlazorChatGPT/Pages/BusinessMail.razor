@page "/businessMail"

@using BlazorChatGPT.Services;
@inject IOpenAiService openAiService;

<h3>Business Mail</h3>

<div>Choose your API service:</div>
<select name="apiService" id="apiService" @bind="@apiService">
    <option value="openai">OpenAI</option>
    <option value="azureopenai">Azure OpenAI</option>
</select>

<div>Type your message:</div>
<div><textarea rows="5" cols="100" @bind="@inputText" /></div>

<button @onclick="() => GenerateBusinessMailAsync()">
    Send
</button>

@if (isLoading)
{
    <p>
        <strong>Waiting for a response...</strong>
    </p>
}

<p class="markup">@((MarkupString)outputText)</p>

@code {

    private string inputText;
    private string outputText;
    private string apiService;
    private bool isLoading;

    public async Task GenerateBusinessMailAsync()
    {
        if (apiService == "openai")
        {
            openAiService.UseOpenAI();
        }
        else
        {
            openAiService.UseAzureOpenAI();
        }

        isLoading = true;
        outputText = await openAiService.GenerateBusinessMailAsync(inputText);
        isLoading = false;
    }
}